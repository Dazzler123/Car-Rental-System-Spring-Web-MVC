<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>File Upload Test</title>
    <meta content="width=device-width initial-scale=1 maximum-scale=1 minimum-scale=1 user-scalable=no" name="viewport">

    <link rel="stylesheet" href="assets/css/styles.css">
    <link rel="stylesheet" href="assets/css/normalize.css">
    <link href="assets/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="assets/images/75702.png" rel="icon">
</head>
<body>
<header class="container-fluid bg-primary p-2">
    <h2 class="text-white">Image Upload And View With Spring</h2>
</header>
<section class="container mt-4">
    <div class="row justify-content-around">
        <div class="col-4">
            <form method="post" enctype="multipart/form-data">
                <label for="file-input-element">Profile Picture</label>
                <input id="file-input-element" type="file" class="form-control">
                <button type="button" id="btnUpload" class="btn btn-danger mt-3">Upload File</button>
            </form>
        </div>
        <div class="col-5">
            <div id="display" class="border border-1, w-100" style="height: 300px"></div>
            <button type="button" id="btnLoad" class="btn btn-success mt-3">Load Image</button>
            <hr>
            <!--            <table class="table table-bordered table-hover">-->
            <!--                <thead class="bg-info text-white">-->
            <!--                <tr>-->
            <!--                    <th>Images</th>-->
            <!--                </tr>-->
            <!--                </thead>-->
            <!--                <tbody id="table">-->

            <!--                </tbody>-->
            <!--            </table>-->
            <img id="imagePreview" src="" alt="imgHere">

        </div>
    </div>
</section>


<script src="assets/bootstrap/js/bootstrap.min.js"></script>
<script src="assets/js/jquery-3.6.1.min.js"></script>
<script>

    const reader = new FileReader();
            // Creates new FileReader object

    $('#btnLoad').click(function () {
        const nicDlImageFile = document.getElementById('file-input-element');

        //save image
        // Get file from input element
        const imgFile = nicDlImageFile.files[0];
        reader.readAsDataURL(imgFile);

        reader.addEventListener('load', () => {
            const url = reader.result
            // add image to localStorage
            localStorage.setItem("BMW i83", url);
            // reader.abort();
        });

        // const url1 = localStorage.getItem('Suzuki Alto Premium1');
        //
        // const img1 = new Image();
        //
        // img1.src = url1;
        //
        // document.body.appendChild(img1);
    });


    // });


//     const inputEl = document.getElementById('file-input-element');
//     // Gets input element
//
//     inputEl.addEventListener('change', () => {
//         // Listens for new input file
//
//         const file = inputEl.files[0];
//         // Gets file from input element
//
//         const fr = new FileReader();
//         // Creates new FileReader object
//
//         fr.readAsDataURL(file);
//         // Set FileReader to output data as URL string
//     });
//
//     $('#btnLoad').click(function () {
//
//         const fr = new FileReader();
//         // Creates new FileReader object
//
//         // Waits for file reading to be complete
//
//         const url = fr.result
//         // Save result
//
//         const img = new Image();
//         img.src = url;
//         document.body.appendChild(img);
//         // Make URL src of image and append to DOM
//
//         localStorage.setItem('Suzuki Alto Premium1', url);
//         // Saves image to localStorage
//
//         // ==============================


//         const url2 = localStorage.getItem('200334000948T');
//         const url3 = localStorage.getItem('200334000948U');
// // Get data URL from localStorage
//
//         const img1 = new Image();
//         const img2 = new Image();
//         const img3 = new Image();
//
//         img1.src = url1;
//         img2.src = url2;
//         img3.src = url3;
//
//         document.body.appendChild(img1);
//         document.body.appendChild(img2);
//         document.body.appendChild(img3);
//         // Set URL as src of image and append to DOM
//
//     });


</script>


<script>
    // // let baseUrl = "http://localhost:8080/Back_End_war_exploded/";
    // //
    // // // loadTheLastUploadedImage();
    // //
    // // $("#btnUpload").click(function () {
    // //     var data = new FormData();
    // //     let file = $("#file")[0].files[0];
    // //     let fileName = $("#file")[0].files[0].name;
    // //     data.append("myFile", file, fileName);
    // //
    // //     $.ajax({
    // //         url: baseUrl + "api/v1/upload",
    // //         method: 'post',
    // //         async: true,
    // //         contentType: false,
    // //         processData: false,
    // //         data: data,
    // //         success: function (resp) {
    // //             alert("Successfully Uploaded");
    // //             loadTheLastUploadedImage();
    // //         },
    // //         error: function (err) {
    // //             console.log(err);
    // //         }
    // //     });
    // // });
    //
    // $('#file').on("change", function (e) {
    //     // let file = e.target.files;
    //     // if (FileReader && file && file.length) {
    //     //     let reader = new FileReader();
    //     //     reader.onload = function () {
    //     //         img.push(reader.result);
    //     //         $('#display').css({
    //     //             "background": `url(${reader.result})`,
    //     //             "background-size": "cover",
    //     //             "background-position": "center"
    //     //         });
    //     //     }
    //     //     reader.readAsDataURL(file[0]);
    //     // }
    //
    //     console.log(this.files);
    //
    //     const reader = new FileReader();
    //
    //     reader.addEventListener("load", () => {
    //         console.log(reader.result)
    //         localStorage.setItem("200334000948", reader.result);
    //     });
    //     reader.readAsDataURL(this.files[0]);
    // });
    //
    // //preview image
    // document.addEventListener("DOMContentLoaded", () => {
    //     const recentImageDataUrl = localStorage.getItem("recent-image");
    //     console.log(recentImageDataUrl);
    //
    //     // const row = `<tr><td>
    //     //         <img src=${recentImageDataUrl} width="150px" height="150px">
    //     //         </td></tr>`;
    //     // $("#table").append(row);
    //     document.querySelector("#imagePreview").setAttribute("src", recentImageDataUrl);
    // });
    //
    //
    // // let row;
    // $("#btnLoad").click(function () {
    //     // // loadTheLastUploadedImage();
    //     // row = `<tr><td>
    //     //         <img src=${img[0]} width="150px" height="150px">
    //     //         </td></tr>`
    //     // $("#table").append(row);
    //     // img.length = 0;
    //
    //
    // });
    //
    // function loadTheLastUploadedImage() {
    //     $("#table").empty();
    //     $.ajax({
    //         url: baseUrl + "api/v1/upload",
    //         method: 'get',
    //         dataType: 'json',
    //         success: function (resp) {
    //             let url = resp[resp.length - 1];
    //
    //             $("#display").css({
    //                 "background": `url(${baseUrl + url})`,
    //                 "background-size": "cover",
    //                 "height": "300px"
    //             });
    //             for (let i in resp) {
    //                 let row = `<tr><td><img src="${baseUrl + resp[i]}" width="100px"></td></tr>`;
    //                 $("#table").append(row);
    //             }
    //         },
    //         error: function (err) {
    //             console.log(err);
    //         }
    //     });
    // }
</script>
</body>
</html>